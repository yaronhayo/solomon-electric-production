---
// src/components/ui/Button.astro
interface Props {
  variant?: "primary" | "secondary" | "icon";
  size?: "lg" | "md" | "sm";
  href?: string;
  class?: string;
  type?: "button" | "submit" | "reset";
  id?: string;
  [x: string]: any;
}

const {
  variant = "primary",
  size = "md",
  href,
  class: className = "",
  type = "button",
  id,
  ...rest
} = Astro.props;

// Base styles for all buttons
const baseStyles =
  "inline-flex items-center justify-center font-secondary font-bold uppercase transition-all duration-[var(--transition-base)] group relative overflow-hidden magnetic-cta";
const shadowStyle = "hover:shadow-[var(--shadow-brand)]";

const sizes = {
  lg: "h-[56px] px-8 text-[18px]",
  md: "h-[48px] px-6 text-[16px]",
  sm: "h-[40px] px-5 text-[14px]",
};

// Variant styles matching Figma (Colors & Clip Path only)
const variants = {
  primary: `
    bg-gradient-to-r from-accent to-[#0ab8c7] text-[#082a4d]
    hover:from-primary hover:to-[#0a3060] hover:text-white
    leading-[1.5] shimmer-authority
    [clip-path:polygon(12px_0%,100%_0%,calc(100%_-_12px)_100%,0%_100%)]
  `,
  secondary: `
    bg-primary text-white border-2 border-accent/30
    hover:bg-accent hover:text-primary hover:border-accent
    leading-[1.5]
    [clip-path:polygon(12px_0%,100%_0%,calc(100%_-_12px)_100%,0%_100%)]
  `,
  icon: `
    bg-accent text-[#082a4d]
    hover:bg-primary hover:text-white
    !px-0 w-[44px] h-[44px] flex items-center justify-center
    text-[18px]
    rounded-[var(--radius-full)]
    shimmer-authority
  `,
};

// Handle old "mobile" variant mapping if necessary, or just rely on manual updates.
// For now, if someone passes "mobile" as variant (which was removed from types but might be in code),
// it will fall back to undefined in variants object.
// We should check usages of variant="mobile" and update them to size="sm".

const styles = `
  ${baseStyles} 
  ${shadowStyle} 
  ${variants[variant] || variants.primary} 
  ${variant !== "icon" ? sizes[size] : ""}
  ${className}
`;

// Element Logic: render <a> if href exists, otherwise <button>
const Element = href ? "a" : "button";
---

<!-- Custom slant effects using pseudo-elements or just simplified CSS for now --><!-- The design shows "Rectangle 12" and "Rectangle 14" creating a slanted look or borders. 
     For now, we will stick to a clean rectangular button with the requested colors/fonts 
     unless we implement the complex multi-part logic. 
     The spec shows strict "auto layout" with rectangles. 
     Standard implementation: Simple standardized button first.
-->
<Element
  href={href}
  type={!href ? type : undefined}
  class={styles}
  id={id}
  {...rest}
>
  <slot />
</Element>
