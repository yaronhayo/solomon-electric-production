---
import { Image } from "astro:assets";
import { SITE_CONFIG } from "../config/site";
import { IMAGES } from "../config/images";
import Container from "./ui/Container.astro";
import SocialIcon from "./ui/SocialIcon.astro";
import { SERVICE_AREAS } from "../data/service-areas";

// Use centralized image registry
const logoWhite = IMAGES.branding.logoWhite;
const badgeSatisfaction = IMAGES.badges.satisfaction;
const badgeAngi = IMAGES.badges.angi;
const badgeYelp = IMAGES.badges.yelp;
const badgeBBB = IMAGES.badges.bbb;
const badgeGuarantee = IMAGES.badges.guarantee;

import {
    Phone,
    Mail,
    MapPin,
    Home,
    Wrench,
    Info,
    MessageSquare,
    Star,
    Map,
    HelpCircle,
    Calendar,
    BookOpen,
} from "lucide-astro";
import PhoneNumber from "./ui/PhoneNumber.astro";

const currentYear = new Date().getFullYear();
---

<footer
    class="bg-primary py-[var(--spacing-2xl)] overflow-hidden relative border-t-4 border-accent"
    aria-label="Site Footer"
>
    <Container>
        <div
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 text-white"
        >
            <!-- Column 1: Logo, Tagline & Trust -->
            <div
                class="flex flex-col gap-4 items-center md:items-start text-center md:text-left"
            >
                <div class="w-[220px] mx-auto md:mx-0">
                    <a href="/" class="block">
                        <Image
                            src={logoWhite.src}
                            alt={logoWhite.alt}
                            class="w-full h-auto opacity-90 hover:opacity-100 transition-opacity"
                        />
                    </a>
                </div>

                <!-- Tagline Paragraph -->
                <p
                    class="font-body text-[length:var(--text-body-sm)] text-white/70 leading-relaxed max-w-[280px]"
                >
                    Your trusted electrical partner in South Florida. Licensed,
                    insured, and dedicated to delivering safe, reliable power
                    solutions for your home and business.
                </p>

                <!-- Trust Badges Row -->
                <div
                    class="flex items-center justify-center md:justify-start gap-2 sm:gap-3 flex-wrap bg-white/10 border border-white/20 p-4 rounded-[var(--radius-2xl)]"
                >
                    <Image
                        src={badgeSatisfaction.src}
                        alt={badgeSatisfaction.alt}
                        class="h-10 w-auto"
                    />
                    <Image
                        src={badgeAngi.src}
                        alt={badgeAngi.alt}
                        class="h-10 w-auto"
                    />
                    <Image
                        src={badgeYelp.src}
                        alt={badgeYelp.alt}
                        class="h-10 w-auto"
                    />
                    <Image
                        src={badgeBBB.src}
                        alt={badgeBBB.alt}
                        class="h-10 w-auto"
                    />
                    <Image
                        src={badgeGuarantee.src}
                        alt={badgeGuarantee.alt}
                        class="h-10 w-auto"
                    />
                </div>

                <!-- License Info -->
                <div
                    class="flex items-center gap-3 mt-4 bg-white/10 border border-white/20 p-4 rounded-[var(--radius-lg)] w-full border-l-4 border-l-accent"
                >
                    <div
                        class="w-10 h-10 border-2 border-accent/30 rounded-[var(--radius-full)] flex items-center justify-center shrink-0"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 24 24"
                            fill="currentColor"
                            class="w-5 h-5 text-accent shimmer-authority"
                        >
                            <path
                                fill-rule="evenodd"
                                d="M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z"
                                clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <div>
                        <span
                            class="block font-secondary font-bold text-[length:var(--text-body-sm)] text-white tracking-widest uppercase"
                            >Licensed FL Contractor</span
                        >
                        <span
                            class="block font-body text-[length:var(--text-h5)] font-bold text-accent"
                            >#{SITE_CONFIG.credentials.license.number}</span
                        >
                    </div>
                </div>
            </div>

            <!-- Column 2: Quick Links -->
            <nav
                aria-label="Footer Quick Links"
                class="text-center md:text-left"
            >
                <h3
                    class="font-secondary font-bold mb-6 text-white text-center md:text-left uppercase tracking-wider text-[length:var(--text-h4)]"
                >
                    Electrical Services
                </h3>

                <div class="flex flex-col gap-3 items-center md:items-start">
                    <a
                        href="/"
                        class="text-white/70 hover:text-accent transition-colors flex items-center gap-2"
                    >
                        <Home class="w-4 h-4" />
                        <span>Home</span>
                    </a>
                    <a
                        href="/services"
                        class="text-white/70 hover:text-accent transition-colors flex items-center gap-2"
                    >
                        <Wrench class="w-4 h-4" />
                        <span>Services</span>
                    </a>
                    <a
                        href="/service-areas"
                        class="text-white/70 hover:text-accent transition-colors flex items-center gap-2"
                    >
                        <Map class="w-4 h-4" />
                        <span>Service Areas</span>
                    </a>
                    <a
                        href="/faq"
                        class="text-white/70 hover:text-accent transition-colors flex items-center gap-2"
                    >
                        <HelpCircle class="w-4 h-4" />
                        <span>FAQ</span>
                    </a>
                    <a
                        href="/reviews"
                        class="text-white/70 hover:text-accent transition-colors flex items-center gap-2"
                    >
                        <Star class="w-4 h-4" />
                        <span>Reviews</span>
                    </a>
                    <a
                        href="/book"
                        class="text-white/70 hover:text-accent transition-colors flex items-center gap-2"
                    >
                        <Calendar class="w-4 h-4" />
                        <span>Book Service</span>
                    </a>
                    <a
                        href="/about"
                        class="text-white/70 hover:text-accent transition-colors flex items-center gap-2"
                    >
                        <Info class="w-4 h-4" />
                        <span>About</span>
                    </a>
                    <a
                        href="/blog"
                        class="text-white/70 hover:text-accent transition-colors flex items-center gap-2"
                    >
                        <BookOpen class="w-4 h-4" />
                        <span>Blog</span>
                    </a>
                    <a
                        href="/contact"
                        class="text-white/70 hover:text-accent transition-colors flex items-center gap-2"
                    >
                        <MessageSquare class="w-4 h-4" />
                        <span>Contact</span>
                    </a>
                </div>
            </nav>

            <!-- Column 3: Service Areas -->
            <nav
                aria-label="Footer Service Areas"
                class="text-center md:text-left"
            >
                <h3
                    class="font-secondary font-bold mb-6 text-white text-center md:text-left uppercase tracking-wider"
                    style="font-size: var(--text-h4);"
                >
                    Cities We Serve
                </h3>

                <div
                    class="grid grid-cols-1 min-[380px]:grid-cols-2 gap-x-4 gap-y-2"
                >
                    {
                        [...SERVICE_AREAS].sort().map((city) => (
                            <a
                                href={`/service-areas/${city.toLowerCase().replace(/\s+/g, "-")}`}
                                class="text-white/70 hover:text-accent transition-colors text-[length:var(--text-label)] flex items-center gap-2"
                            >
                                <MapPin class="w-3 h-3 text-accent/50" />
                                <span>{city}</span>
                            </a>
                        ))
                    }
                </div>
                <a
                    href="/service-areas"
                    class="inline-block mt-6 text-accent hover:text-white transition-colors text-[length:var(--text-label)] font-bold uppercase tracking-wider flex items-center gap-2 justify-center md:justify-start group"
                >
                    View All Areas
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke-width="2"
                        stroke="currentColor"
                        class="w-4 h-4 group-hover:translate-x-1 transition-transform"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path>
                    </svg>
                </a>
            </nav>

            <!-- Column 4: Contact Us -->
            <div class="text-center md:text-left">
                <h3
                    class="font-secondary font-bold mb-6 text-white text-center md:text-left uppercase tracking-wider"
                    style="font-size: var(--text-h4);"
                >
                    Contact Your Electrician
                </h3>

                <div
                    class="flex flex-col gap-[var(--gap-md)] items-center md:items-start"
                >
                    <a
                        href={SITE_CONFIG.contact.phone.href}
                        class="flex items-center gap-3 group hover:text-accent transition-colors"
                    >
                        <Phone class="w-5 h-5 text-accent" />
                        <PhoneNumber
                            class="font-body text-[length:var(--text-body-sm)]"
                        /></a
                    >
                    <a
                        href={`mailto:${SITE_CONFIG.contact.email.support}`}
                        class="flex items-center gap-3 group hover:text-accent transition-colors"
                    >
                        <Mail class="w-5 h-5 text-accent" />
                        <span
                            class="font-body text-[length:var(--text-body-sm)]"
                            >{SITE_CONFIG.contact.email.support}</span
                        >
                    </a>
                    <a
                        href="https://maps.app.goo.gl/J2wd5AwUqZFDYzqW6"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="flex items-start gap-3 group hover:text-accent transition-colors"
                    >
                        <MapPin class="w-5 h-5 text-accent mt-0.5" />
                        <span
                            class="font-body text-[length:var(--text-body-sm)] max-w-[200px]"
                            >{SITE_CONFIG.contact.address.full}</span
                        >
                    </a>
                </div>

                <!-- Social Icons -->
                <div
                    class="flex gap-[var(--gap-md)] mt-8 justify-center md:justify-start"
                >
                    <SocialIcon
                        href={SITE_CONFIG.social.facebook}
                        label="Facebook"
                        class="w-10 h-10"
                    >
                        <svg
                            class="w-5 h-5"
                            fill="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"
                            ></path>
                        </svg>
                    </SocialIcon>
                    <SocialIcon
                        href={SITE_CONFIG.social.instagram}
                        label="Instagram"
                        class="w-10 h-10"
                    >
                        <svg
                            class="w-5 h-5"
                            fill="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                d="M12 0C8.74 0 8.333.015 7.053.072 2.695.272.273 2.69.073 7.052.014 8.332 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.668-.014 4.948-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.689-.073-4.948-.073zm0 5.838a6.162 6.162 0 1 1 0 12.324 6.162 6.162 0 0 1 0-12.324zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm6.406-11.845a1.44 1.44 0 1 1 0 2.88 1.44 1.44 0 0 1 0-2.88z"
                            ></path>
                        </svg>
                    </SocialIcon>
                    <SocialIcon
                        href={SITE_CONFIG.social.yelp}
                        label="Yelp"
                        class="w-10 h-10"
                    >
                        <svg
                            class="w-5 h-5"
                            fill="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                d="M12.308 14.621a1.29 1.29 0 0 1-.601 1.218l-.514.288c-.286.161-.634.184-.942.062a1.08 1.08 0 0 1-.659-.6l-.49-2.221a1.18 1.18 0 0 1 1.077-1.413l.519-.026a1.29 1.29 0 0 1 1.025.485c.159.2.229.458.204.7l-.019 1.507zm-3.959-3.4c.245.467.242 1.018-.008 1.482l-.219.41a1.29 1.29 0 0 1-1.412.635l-.518-.129a1.08 1.08 0 0 1-.741-.845l-.49-2.221a1.18 1.18 0 0 1 .288-1.228l.281-.295c.404-.43 1.1-.403 1.528.006l1.3 1.185zm3.317-1.834c.231-.475.215-1.025-.043-1.486l-.219-.395a1.29 1.29 0 0 0-1.485-.594l-.527.119a1.08 1.08 0 0 0-.817.79l-.112.36a1.18 1.18 0 0 0 .36 1.2l3.221 2.768a1.29 1.29 0 0 0 1.463-.109l.36-.653zm7.683 1.123l-4.223-.004a1.29 1.29 0 0 0-1.244 1.234l.014 4.223a1.18 1.18 0 0 0 1.06 1.06h.314a1.08 1.08 0 0 0 1.066-.777l1.034-3.087h1.006a1.29 1.29 0 0 0 1-1.29v-.314a1.08 1.08 0 0 0-1-1.005zm-11.849 0v-.546l.034-4.223a1.18 1.18 0 0 0-1.057-1.06H6.13a1.08 1.08 0 0 0-1.066.777l-.53 1.57h-1.006l-.552.001c-.552 0-1 .448-1 1l.001.314a1.08 1.08 0 0 0 1 1h4.223a1.29 1.29 0 0 0 1.243-1.248z"
                            ></path>
                        </svg>
                    </SocialIcon>
                    <SocialIcon
                        href={SITE_CONFIG.social.googleMaps}
                        label="Google Business"
                        class="w-10 h-10"
                    >
                        <svg
                            class="w-5 h-5"
                            fill="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                d="M21.35 11.1h-9.17v2.73h6.51c-.33 3.81-3.5 5.44-6.5 5.44C8.36 19.27 5 16.25 5 12c0-4.1 3.2-7.27 7.2-7.27 3.09 0 4.9 1.97 4.9 1.97L19 4.72S16.56 2 12.1 2C6.42 2 2.03 6.8 2.03 12c0 5.05 4.13 10 10.22 10 5.35 0 9.25-3.67 9.25-9.09 0-1.15-.15-1.81-.15-1.81z"
                            ></path>
                        </svg>
                    </SocialIcon>
                </div>
            </div>
        </div>

        <!-- Copyright -->
        <div class="border-t border-white/10 mt-12 pt-8 pb-6">
            <!-- Top Row: Gett Marketing Credit - Centered -->
            <div class="text-center mb-6">
                <p class="text-white/60 text-[length:var(--text-label)]">
                    Made with <span class="heart text-red-500 inline-block mx-1"
                        >â™¥</span
                    > by
                    <a
                        href="https://www.gettmarketing.com"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="text-white/60 hover:text-accent transition-colors underline decoration-accent/30"
                        >Gett Marketing</a
                    >
                </p>
            </div>

            <!-- Bottom Row: Copyright and Legal Links -->
            <div
                class="flex flex-col md:flex-row justify-between items-center gap-4"
            >
                <p class="text-white/60 text-[length:var(--text-label)]">
                    &copy; {currentYear} Solomon Electric. All rights reserved.
                </p>
                <div class="flex gap-6">
                    <a
                        href="/privacy"
                        class="text-white/60 hover:text-white text-[length:var(--text-label)] transition-colors"
                        >Privacy Policy</a
                    >
                    <a
                        href="/terms"
                        class="text-white/60 hover:text-white text-[length:var(--text-label)] transition-colors"
                        >Terms &amp; Conditions</a
                    >
                </div>
            </div>
        </div>
    </Container>
</footer>

<style>
    .heart {
        animation: pulse-scale 2s ease-in-out infinite;
    }

    /* Mobile touch target sizing for accessibility */
    @media (max-width: 768px) {
        footer a {
            min-height: 44px;
            display: inline-flex;
            align-items: center;
            padding-top: 4px;
            padding-bottom: 4px;
        }
        footer a:focus-visible {
            outline: var(--outline-accent);
            outline-offset: 4px;
            border-radius: var(--radius-sm);
        }
    }
</style>
